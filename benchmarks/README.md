# Benchmarks

## Metal on M1 Max MacBook Pro (32-core GPU)

|job_name|job_size|exec_duration_seconds|proof_duration_seconds|verify_duration_seconds|insn_cycles|proof_bytes|
|---|---|---|---|---|---|---|
|big_sha2|1024|0.006575125|1.675866375|0.002355667|79810|238308|
|big_sha2|2048|0.010656334|3.164389542|0.002501208|157778|250020|
|big_sha2|4096|0.01865775|6.010605792|0.002537625|313714|262244|
|big_sha2|8192|0.03528725|11.780789041|0.00277375|625586|275492|
|big_keccak|1024|0.011923709|5.988214042|0.002407125|283856|262244|
|big_keccak|2048|0.021990708|11.385303|0.002817208|565829|275492|
|big_keccak|4096|0.042875625|14.807175|0.00518625|1104186|525512|
|big_keccak|8192|0.083601125|27.589918791|0.007855875|2180887|801004|
|big_blake2b|1024|0.00847675|3.22051525|0.00224675|147093|250020|
|big_blake2b|2048|0.015508792|6.171124792|0.002542417|291549|262244|
|big_blake2b|4096|0.027731708|11.157649917|0.002754583|580461|275492|
|big_blake2b|8192|0.055107167|17.911950375|0.005360625|1158285|537736|
|big_blake2b|1024|0.007056959|3.124300541|0.002292416|115573|250020|
|big_blake2b|2048|0.013030375|5.945047042|0.002612833|231625|262244|
|big_blake2b|4096|0.023219792|10.884353041|0.002850417|464092|275492|
|big_blake2b|8192|0.043599334|11.779598083|0.002905584|929026|275492|
|iter_sha2|1|0.002013583|0.893544625|0.002366958|4677|215268|
|iter_sha2|10|0.002449959|0.828392917|0.002395042|8358|215268|
|iter_sha2|100|0.003746167|1.580169375|0.002213542|45168|238308|
|iter_keccak|1|0.00283325|1.449392958|0.002614959|30192|238308|
|iter_keccak|10|0.009001667|5.966903791|0.00253075|263061|262244|
|iter_keccak|100|0.07853925|34.033164833|0.008473625|2591721|826476|
|iter_blake2b|1|0.003305459|1.563631042|0.002644625|13818|238308|
|iter_blake2b|10|0.006637083|3.08788|0.00245625|99967|250020|
|iter_blake2b|100|0.035005459|12.231975959|0.002981791|961447|275492|
|iter_blake3|1|0.004095875|0.867600334|0.002538708|7072|215268|
|iter_blake3|10|0.003066042|1.477961875|0.002822625|31643|238308|
|iter_blake3|100|0.009363417|6.03728775|0.002566708|277343|262244|
|ecdsa_verify|1|0.056222375|13.614030542|0.005111834|857204|490760|
|ed25519_verify|1|0.05001625|18.746699|0.002835833|625456|275492|
|finbonacci|10|0.002501834|0.957013333|0.002423792|1197|215268|
|finbonacci|1000|0.002855792|0.984983041|0.002478083|11097|215268|
|finbonacci|10000|0.00612475|3.230235|0.002325958|101097|250020|

### CPU on M1 Max MacBook Pro (10-core CPU)

|job_name|job_size|exec_duration_seconds|proof_duration_seconds|verify_duration_seconds|insn_cycles|proof_bytes|
|---|---|---|---|---|---|---|
|big_sha2|1024|0.00791575|8.907595458|0.002184208|79810|238308|
|big_sha2|2048|0.010839083|17.871265458|0.002285083|157778|250020|
|big_sha2|4096|0.019077292|36.460794291|0.002526375|313714|262244|
|big_sha2|8192|0.036929417|73.256496166|0.002747292|625586|275492|
|big_keccak|1024|0.012425|36.283319459|0.00254325|283856|262244|
|big_keccak|2048|0.022306292|74.249824458|0.00275975|565829|275492|
|big_keccak|4096|0.044107334|93.660952459|0.005077292|1104186|525512|
|big_keccak|8192|0.084208875|168.103389625|0.007973625|2180887|801004|
|big_blake2b|1024|0.008589042|17.85764725|0.002338458|147093|250020|
|big_blake2b|2048|0.014874917|35.7652795|0.002500833|291549|262244|
|big_blake2b|4096|0.02861125|73.027367542|0.002785375|580461|275492|
|big_blake2b|8192|0.057641209|109.407297125|0.005283333|1158285|537736|
|big_blake2b|1024|0.007014875|17.792852208|0.002353542|115573|250020|
|big_blake2b|2048|0.012714583|35.838649417|0.00258575|231625|262244|
|big_blake2b|4096|0.02298775|73.786135042|0.002772167|464092|275492|
|big_blake2b|8192|0.044164|75.674798083|0.002782291|929026|275492|
|iter_sha2|1|0.002681584|4.295316458|0.002373708|4677|215268|
|iter_sha2|10|0.002566834|4.242898125|0.002348334|8358|215268|
|iter_sha2|100|0.003920291|8.647774458|0.002198292|45168|238308|
|iter_keccak|1|0.002632125|8.564951875|0.002266458|30192|238308|
|iter_keccak|10|0.00913625|35.699596042|0.0027925|263061|262244|
|iter_keccak|100|0.078430792|220.202694625|0.008310584|2591721|826476|
|iter_blake2b|1|0.0028475|8.545895959|0.002220333|13818|238308|
|iter_blake2b|10|0.005192542|17.640896542|0.00239025|99967|250020|
|iter_blake2b|100|0.034589625|74.075614959|0.002760416|961447|275492|
|iter_blake3|1|0.002767667|4.25554|0.002353583|7072|215268|
|iter_blake3|10|0.003142792|8.624936833|0.002167708|31643|238308|
|iter_blake3|100|0.009847208|36.232478542|0.002451792|277343|262244|
|ecdsa_verify|1|0.055257792|79.138589166|0.005018|857204|490760|
|ed25519_verify|1|0.041288167|137.358555875|0.002737584|618094|275492|
|finbonacci|10|0.002588291|5.279785917|0.002324458|1197|215268|
|finbonacci|1000|0.002904|5.237076916|0.002488167|11097|215268|
|finbonacci|10000|0.006032958|21.261764167|0.002341916|101097|250020|


## Running all the benchmarks

### CPU

```console
$ RUST_LOG=info cargo run --release -- --out metrics.csv all
```

### Metal

```console
$ RUST_LOG=info cargo run --release -F metal -- --out metrics.csv all
```

### CUDA

```console
$ RUST_LOG=info cargo run --release -F cuda -- --out metrics.csv all
```

## Running specific benchmark
To run a specific benchmark replace the `all` option used in the previous command with one of the following:
e.g.,
```console
$ RUST_LOG=info cargo run --release -F metal -- --out metrics.csv big-sha2
```

### `big-sha2`

Computes the SHA2-256 hash of large random buffers of various sizes.

### `iter-sha2`

Computes the SHA2-256 hash of a given buffer for a given amount of iterations.

### `big-keccak`

Computes the Keccak hash of large random buffers of various sizes.

### `iter-keccak`

Computes the Keccak hash of a given buffer for a given amount of iterations.

### `big-blake2b`

Computes the Blake2b hash of large random buffers of various sizes.

### `iter-blake2b`

Computes the Blake2b hash of a given buffer for a given amount of iterations.

### `big-blake3`

Computes the Blake3 hash of large random buffers of various sizes.

### `iter-blake3`

Computes the Blake3 hash of a given buffer for a given amount of iterations.

### `ecdsa-verify`

Verifies a given ECDSA signature (on the secp256k1 curve).

### `ed25519-verify`

Verifies a given Ed25519 signature (on the ed25519 curve).

### `fibonacci`

Computes the Fibonacci sequence of a given number.

### `merkle-tree`

Computes the membership proof for a given authenticated path from a leaf to a merkle tree root.

### `zeth`

Computes the proof for a given Ethereum block containing a given number of transactions.
